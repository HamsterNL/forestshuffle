import{F as w}from"./@fortawesome-4Z9AeAtC.js";import{_ as C,u,F as E,a as y}from"./index-D8PAF7Bf.js";import{e as _}from"./vue-gtag-C0s-1YzP.js";import{I as o,J as i,S as n,V as c,R as b,L as k,F as h,Z as N,Q as v,N as I,E as m,a4 as B,U as F,a2 as x,a3 as S}from"./@vue-DYGLXc7m.js";import{O,M as P}from"./bootstrap-SC8BV6mU.js";import"./register-service-worker-TYP_X6yW.js";import"./vue-router-DDJinBz7.js";import"./vue-toastification-D6KPsXUS.js";import"./pinia-BFmCJHb-.js";import"./vue-i18n-BMfRoggq.js";import"./@intlify-Y34EtYYP.js";import"./@unhead-CV5XFYeB.js";import"./unhead-BwRgIbF_.js";import"./hookable-B8xFkYCm.js";import"./@popperjs-WhmJkuoZ.js";const M={name:"CardAmountEditor",components:{FontAwesomeIcon:w},props:{card:Object,forest:Object},computed:{playerName(){return this.forest.playerName}},methods:{addCard(){u().addCard(this.playerName,this.card.name);const e=this.$t(this.card.name,"en");_("cardAdded",{card:e})},removeCard(){u().removeCard(this.playerName,this.card.name)},paramAdd(e){e.type==="number"?u().addParam(this.playerName,this.card.name,e.name):e.type==="type"&&u().addSymbolCount(this.playerName,e.symbol)},paramSub(e){e.type==="number"?u().subParam(this.playerName,this.card.name,e.name):e.type==="type"&&u().subSymbolCount(this.playerName,e.symbol)}}},G={class:"row mt-2"},R={class:"fw-bold col-1"},L={key:0},j={class:"col-9 pe-0 text-nowrap overflow-x-hidden"},T=["src"],V=["src"],z={class:"ms-2"},K={class:"col-1 ps-0"},D={class:"col-1 text-start overflow-x-hidden"},H={key:0},U={class:"fw-bold offset-1 col-1"},q={key:0},J={key:1},Q={class:"col-8 text-nowrap pe-0"},W=["onClick"],Z=["src","alt"],X={class:"ps-2"},Y={class:"col-1 ps-0"},ee=["onClick"];function te(e,s,r,f,g,t){return o(),i(h,null,[n("div",G,[n("div",R,[r.card.count>0?(o(),i("span",L,c(r.card.count)+"×",1)):b("",!0)]),n("div",j,[n("button",{onClick:s[0]||(s[0]=(...a)=>t.addCard&&t.addCard(...a)),class:k(["btn-"+r.card.symbols[0],"w-100 btn btn-primary btn-sm text-start"])},[(o(!0),i(h,null,N(r.card.symbols,(a,d)=>(o(),i("img",{src:"./img/symbols/"+a+".png",height:"20",class:k({"ms-1":d>0})},null,10,T))),256)),r.card.name.startsWith("roe")?(o(),i("img",{key:0,src:"./img/symbols/"+r.card.type+".png",height:"20",class:"ms-1"},null,8,V)):b("",!0),n("span",z,c(e.$t(r.card.name)),1)],2)]),n("div",K,[n("button",{class:"ms-1 btn btn-outline-danger btn-sm",onClick:s[1]||(s[1]=(...a)=>t.removeCard&&t.removeCard(...a))},"×")]),n("div",D,[r.card.count>0&&r.card.symbols.indexOf("butterfly")<0?(o(),i("span",H,c(r.card.points),1)):b("",!0)])]),(o(!0),i(h,null,N(r.card.params,(a,d)=>(o(),i("div",{class:k(["mt-1 row",{"mb-3":r.card.params.length===d+1}]),key:a.name},[n("div",U,[r.card.count>0&&a.type==="number"?(o(),i("span",q,c(a.value),1)):b("",!0),r.card.count>0&&a.type==="type"?(o(),i("span",J,c(r.forest[a.symbol+"Count"]),1)):b("",!0)]),n("div",Q,[n("button",{onClick:l=>t.paramAdd(a),class:k(["btn-"+r.card.symbols[0],"btn btn-sm btn-primary text-start w-100"])},[a.type==="type"?(o(),i("img",{key:0,src:"./img/symbols/"+a.symbol+".png",alt:e.$t(a.symbol),height:"20"},null,8,Z)):b("",!0),n("span",X,c(e.$t(a.name)),1)],10,W)]),n("div",Y,[n("button",{class:"ms-1 btn btn-outline-danger btn-sm",onClick:l=>t.paramSub(a)},"×",8,ee)])],2))),128))],64)}const A=C(M,[["render",te],["__scopeId","data-v-76850f98"]]),se={name:"SymbolAmountEditor",props:{playerName:String},computed:{forest(){return u().getForestByPlayerName(this.playerName)}},methods:{update(e,s){u().setSymbolCount(this.playerName,e,s)},add(e){u().addSymbolCount(this.playerName,e)}}},ne={class:"d-flex justify-content-around"},ae={class:"text-center"},re=["for","onClick"],le=["src","alt"],oe=["id","value","onInput"];function ie(e,s,r,f,g,t){return o(),i("div",ne,[(o(),i(h,null,N(["beech","linden","silverFir","horseChestnut","birch"],(a,d)=>n("div",ae,[n("label",{for:"#"+a+"CountInput",onClick:l=>t.add(a)},[n("img",{src:"./img/symbols/"+a+".png",alt:a,width:"32",class:"img-fluid"},null,8,le)],8,re),n("input",{id:a+"CountInput",value:t.forest[a+"Count"],onInput:l=>t.update(a,l.target.value),type:"number",class:"form-control amount-input",min:"0",onfocus:"this.select();",onclick:"this.select();"},null,40,oe)])),64))])}const de=C(se,[["render",ie],["__scopeId","data-v-997b556a"]]),ce={name:"CardAmountEditorList",components:{SymbolAmountEditor:de,CardAmountEditor:A},props:{cards:Array,forest:E,symbol:String,symbol2:String,heading:String},computed:{totalPoints(){return this.symbol==="butterfly"?this.forest.butterflyPoints:this.cards.map(e=>e.points).reduce((e,s)=>s+=e,0)},filteredCards(){return y().alpineExpansion?this.cards:this.cards.filter(e=>e.symbols.indexOf("alps")<0)}}},me=["src","alt"],ue=["src","alt"],ye={class:"ms-1 fs-5 flex-grow-1"},fe={class:"fs-5"};function ge(e,s,r,f,g,t){const a=v("CardAmountEditor");return o(),i(h,null,[n("div",I(e.$attrs,{class:"d-flex align-items-center"}),[n("img",{src:"./img/symbols/"+r.symbol+".png",height:"24",alt:e.$t(r.heading)},null,8,me),r.symbol2?(o(),i("img",{key:0,src:"./img/symbols/"+r.symbol2+".png",height:"24",alt:e.$t(r.heading)},null,8,ue)):b("",!0),n("div",ye,c(e.$t(r.heading)),1),n("div",fe,c(t.totalPoints),1)],16),(o(!0),i(h,null,N(t.filteredCards,d=>(o(),i("div",{key:"cae_"+d.name,class:"d-block"},[m(a,{card:d,forest:r.forest},null,8,["card","forest"])]))),128))],64)}const be=C(ce,[["render",ge]]),he={name:"FloatingButtons",components:{FontAwesomeIcon:w},emits:["addPlayer","toggleStandings"],computed:{playerCount(){return y().players.length}}},pe={class:"wrapper"},_e={class:"d-flex justify-content-around align-items-center"},ve={class:"button-group"};function Ce(e,s,r,f,g,t){const a=v("font-awesome-icon");return o(),i("div",pe,[n("div",_e,[n("div",ve,[m(a,{class:k(["btn btn-primary rounded-5 py-2 shadow",{disabled:t.playerCount>=5}]),icon:"user-plus",size:"1x",onClick:s[0]||(s[0]=d=>e.$emit("addPlayer"))},null,8,["class"]),m(a,{class:"ms-1 btn btn-primary rounded-5 py-2 shadow",icon:"list-ol",size:"1x",onClick:s[1]||(s[1]=d=>e.$emit("toggleStandings"))})])])])}const $=C(he,[["render",Ce],["__scopeId","data-v-60ea775f"]]),ke="/forestshuffle/img/symbols/alps.png",Ne={name:"NavigationAndButtons",components:{FloatingButtons:$,FontAwesomeIcon:w},emits:["toggleStandings","startNewGame","resetPlayers"],data(){return{editing:!1}},computed:{alpineExpansion(){return y().alpineExpansion},forests(){return u().forests},players(){return y().players.map(e=>({...e,points:u().getForestByPlayerName(e.name).points}))},currentPlayer(){return y().currentPlayer},playerNumber(){return y().players.findIndex(e=>e.name===this.currentPlayer.name)+1},points(){return u().getForestByPlayerName(this.currentPlayer.name).points}},methods:{closeMenu(){const e=O.getInstance(document.getElementById("navigation"));e&&e.hide()},addPlayer(){const e=this.$t("player")+" "+(this.players.length+1);u().addForest(e),y().addPlayer(e),this.selectPlayer(e),_("playerAdded",{totalPlayers:y().players.length})},selectPlayer(e){y().selectPlayer(e),this.closeMenu()},updatePlayerName(){this.editing=!1;const e=this.currentPlayer.name,s=document.getElementById("playerNameInput").value;y().updatePlayerName(e,s),u().getForestByPlayerName(e).playerName=s,_("playerNameUpdated",{name:s})},startNewGame(){this.$emit("startNewGame"),this.closeMenu()},resetPlayers(){this.$emit("resetPlayers"),this.closeMenu()},toggleAlpineExpansion(){y().toggleAlpineExpansion(),_("alpineExpansionToggled",{newState:this.alpineExpansion})},changeLanguage(e){this.$i18n.locale=e,_("languageChanged",{language:e})}}},we=e=>(x("data-v-94127def"),e=e(),S(),e),Pe={class:"header d-flex align-items-center py-2"},xe={key:0,class:"d-flex justify-content-between align-items-center w-100 pe-2"},Se={key:0},Ae={class:"ms-1 text-light cursor-pointer"},$e={key:1,class:"d-flex"},Ee=["value"],Ie={class:"current-player-text fs-1"},Be={id:"navigation",class:"offcanvas offcanvas-start z-9999",tabindex:"-1"},Fe={class:"offcanvas-header"},Oe={class:"offcanvas-body"},Me={class:"list-group"},Ge=["onClick"],Re={class:"ms-2 flex-grow-1 text-end fw-bold text-decoration-none"},Le={class:"mt-2 mb-5 text-center"},je=["checked"],Te={class:"form-check-label ms-2 user-select-none"},Ve=we(()=>n("img",{src:ke,alt:"alps",height:"24"},null,-1)),ze={class:"d-flex justify-content-center w-100 mt-5"};function Ke(e,s,r,f,g,t){const a=v("font-awesome-icon"),d=v("FloatingButtons");return o(),i(h,null,[n("div",Pe,[n("div",{class:"px-2 mx-auto","data-bs-toggle":"offcanvas","data-bs-target":"#navigation",onClick:s[0]||(s[0]=(...l)=>e.openMenu&&e.openMenu(...l))},[m(a,{icon:"bars",class:"text-light p-1 border border-light rounded-1"})]),t.currentPlayer?(o(),i("div",xe,[g.editing?(o(),i("div",$e,[n("input",{id:"playerNameInput",type:"text",value:t.currentPlayer.name,class:"form-control",onfocus:"this.select();",onclick:"this.select();",onKeydown:s[3]||(s[3]=B((...l)=>t.updatePlayerName&&t.updatePlayerName(...l),["enter"]))},null,40,Ee),n("button",{class:"btn btn-outline-light btn-sm ms-1",onClick:s[4]||(s[4]=(...l)=>t.updatePlayerName&&t.updatePlayerName(...l))},"OK")])):(o(),i("div",Se,[n("span",{class:"current-player-text fs-1",onClick:s[1]||(s[1]=l=>g.editing=!0)},c(t.currentPlayer.name),1),n("span",Ae,[m(a,{icon:"edit",size:"xs",onClick:s[2]||(s[2]=l=>g.editing=!0)})])])),n("div",Ie,c(t.points),1)])):b("",!0)]),n("div",Be,[n("div",Fe,[n("button",{type:"button",class:"btn-close text-reset",onClick:s[5]||(s[5]=(...l)=>t.closeMenu&&t.closeMenu(...l)),"aria-label":"Close"})]),n("div",Oe,[n("div",Me,[(o(!0),i(h,null,N(t.forests,(l,p)=>(o(),i("div",{class:k(["list-group-item d-flex",{active:l.playerName===t.currentPlayer.name}]),onClick:kt=>t.selectPlayer(l.playerName)},[n("span",null,c(l.playerName),1),n("span",Re,c(l.points),1)],10,Ge))),256))]),n("div",Le,[t.players.length<5?(o(),i("button",{key:0,class:"btn btn-sm btn-primary",onClick:s[6]||(s[6]=(...l)=>t.addPlayer&&t.addPlayer(...l))},[m(a,{icon:"user-plus"})])):b("",!0)]),n("div",{class:"d-flex mt-3 w-100 justify-content-center",onClick:s[8]||(s[8]=(...l)=>t.toggleAlpineExpansion&&t.toggleAlpineExpansion(...l))},[n("input",{class:"form-check form-check-input bg-primary",type:"checkbox",checked:t.alpineExpansion,onInput:s[7]||(s[7]=(...l)=>t.toggleAlpineExpansion&&t.toggleAlpineExpansion(...l))},null,40,je),n("div",Te,[Ve,F(c(e.$t("alpineExpansion")),1)])]),n("div",ze,[n("span",{class:"flag-icon flag-icon-gb-eng cursor-pointer",onClick:s[9]||(s[9]=l=>t.changeLanguage("en"))}),n("span",{class:"ms-2 flag-icon flag-icon-de cursor-pointer",onClick:s[10]||(s[10]=l=>t.changeLanguage("de"))}),n("span",{class:"ms-2 flag-icon flag-icon-fr cursor-pointer",onClick:s[11]||(s[11]=l=>t.changeLanguage("fr"))}),n("span",{class:"ms-2 flag-icon flag-icon-it cursor-pointer",onClick:s[12]||(s[12]=l=>t.changeLanguage("it"))})]),n("div",{class:"mt-5 d-block btn btn-danger cursor-pointer",onClick:s[13]||(s[13]=(...l)=>t.startNewGame&&t.startNewGame(...l))},c(e.$t("startNewGame")),1),n("div",{class:"mt-2 d-block btn btn-danger",onClick:s[14]||(s[14]=(...l)=>t.resetPlayers&&t.resetPlayers(...l))},c(e.$t("resetPlayers")),1)])]),m(d,{onAddPlayer:t.addPlayer,onToggleStandings:s[15]||(s[15]=l=>e.$emit("toggleStandings"))},null,8,["onAddPlayer"])],64)}const De=C(Ne,[["render",Ke],["__scopeId","data-v-94127def"]]),He={name:"Ranking",components:{FontAwesomeIcon:w},emits:["toggleStandings","startNewGame","resetPlayers"],computed:{forests(){const e=[...u().forests].sort((f,g)=>g.points-f.points);let s=1,r=9999;return e.map(f=>(f.points<r&&(s=e.findIndex(g=>g.playerName===f.playerName)+1),r=f.points,{...f,rank:s}))}},methods:{selectPlayer(e){y().selectPlayer(e),this.$emit("toggleStandings")}}},Ue={class:"container"},qe={class:"list-group mt-2"},Je={class:"list-group-item"},Qe={class:"d-flex justify-content-between"},We={class:"pe-2 rank"},Ze=["onClick"],Xe={class:"ps-2 text-end"};function Ye(e,s,r,f,g,t){return o(),i("div",Ue,[n("div",qe,[(o(!0),i(h,null,N(t.forests,(a,d)=>(o(),i("div",Je,[n("div",Qe,[n("div",We,c(a.rank>d?`${a.rank}.`:""),1),n("div",{onClick:l=>t.selectPlayer(a.playerName),class:"flex-grow-1 fw-bold"},c(a.playerName),9,Ze),n("div",Xe,c(a.points),1)])]))),256))])])}const et=C(He,[["render",Ye],["__scopeId","data-v-8c52be98"]]),tt={components:{Ranking:et,FloatingButtons:$,NavigationAndButtons:De,CardAmountEditorList:be,CardAmountEditor:A},computed:{playerName(){var e;return(e=y().currentPlayer)==null?void 0:e.name},forest(){return u().getForestByPlayerName(this.playerName)},cards(){return u().getForestByPlayerName(this.playerName).cards},trees(){return this.cards.filter(e=>e.symbols.indexOf("tree")>=0)},birds(){return this.cards.filter(e=>e.symbols.indexOf("bird")>=0)},butterflies(){return this.cards.filter(e=>e.symbols.indexOf("butterfly")>=0)},others(){return this.forest.cards.filter(e=>e.name==="redSquirrel")},plants(){return this.cards.filter(e=>e.symbols.indexOf("plant")>=0)},mushrooms(){return this.cards.filter(e=>e.symbols.indexOf("mushroom")>=0)},amphibians(){return this.cards.filter(e=>e.symbols.indexOf("amphibian")>=0)},insectsBottom(){return this.cards.filter(e=>e.symbols.indexOf("insect")>=0&&e.position==="bottom")},pawedBottom(){return this.cards.filter(e=>e.symbols.indexOf("pawedAnimal")>=0&&e.position==="bottom")},insectsSide(){return this.cards.filter(e=>e.symbols.indexOf("insect")>=0&&e.position==="side")},bats(){return this.cards.filter(e=>e.symbols.indexOf("bat")>=0)},deerAndCloven(){return this.cards.filter(e=>e.symbols.indexOf("deer")>=0||e.symbols.indexOf("clovenHoofedAnimal")>=0)},pawedSide(){return this.cards.filter(e=>e.symbols.indexOf("pawedAnimal")>=0&&e.position==="side")},points(){return u().getForestByPlayerName(this.playerName).points}},methods:{setCaveCount(e){u().setCaveCount(this.playerName,e)},toggleRankingsModal(e){const s=document.getElementById("standingsModal");s&&(s.classList.contains("show")?P.getOrCreateInstance(s).hide():e||P.getOrCreateInstance(s).show())},startNewGame(){u().reset(),y().selectPlayer(y().players[0].name),this.toggleRankingsModal(!0),_("newGameStarted")},resetPlayers(){y().resetPlayers(),y().addPlayer(`${this.$t("player")} 1`),u().reinit(),this.startNewGame(),_("playerReset")}},watch:{playerName:{handler(e){if(!e){const s=y();if(s.players.length===0){const r=this.$t("player")+" 1";s.addPlayer(r),s.selectPlayer(r),u().addForest(r)}else s.selectPlayer(s.players[0].name)}},immediate:!0}},mounted(){_("newGameStarted")}},st=e=>(x("data-v-f2af20b9"),e=e(),S(),e),nt={key:0,class:"container"},at=st(()=>n("div",{class:"distance-keeper position-relative"},null,-1)),rt={class:"mt-4 fs-2 border-primary border-bottom"},lt={class:"mt-4 fs-2 border-primary border-bottom"},ot={class:"mt-4 fs-2 border-primary border-bottom"},it={class:"mt-4 mb-5"},dt={class:"text-center"},ct=["alt"],mt={class:"text-center"},ut=["value"],yt={id:"standingsModal",class:"modal fade",tabindex:"-1"},ft={class:"modal-dialog"},gt={class:"modal-content"},bt={class:"modal-header"},ht={class:"fs-1"},pt={class:"modal-body"},_t={class:"modal-footer d-flex justify-content-between"},vt={class:"flex-grow-1 text-end"};function Ct(e,s,r,f,g,t){const a=v("NavigationAndButtons"),d=v("CardAmountEditorList"),l=v("Ranking");return o(),i(h,null,[m(a,{onToggleStandings:t.toggleRankingsModal,onStartNewGame:t.startNewGame,onResetPlayers:t.resetPlayers},null,8,["onToggleStandings","onStartNewGame","onResetPlayers"]),t.forest?(o(),i("div",nt,[at,m(d,{cards:t.trees,forest:t.forest,symbol:"tree",heading:"trees"},null,8,["cards","forest"]),n("div",rt,c(e.$t("tops")),1),m(d,{class:"mt-1",cards:t.birds,forest:t.forest,symbol:"bird",heading:"birds"},null,8,["cards","forest"]),m(d,{class:"mt-4",cards:t.butterflies,forest:t.forest,symbol:"butterfly",heading:"butterflies"},null,8,["cards","forest"]),m(d,{class:"mt-4",cards:t.others,forest:t.forest,symbol:"pawedAnimal",heading:"pawedAnimals"},null,8,["cards","forest"]),n("div",lt,c(e.$t("bottoms")),1),m(d,{class:"mt-1",cards:t.plants,forest:t.forest,symbol:"plant",heading:"plants"},null,8,["cards","forest"]),m(d,{class:"mt-4",cards:t.mushrooms,forest:t.forest,symbol:"mushroom",heading:"mushrooms"},null,8,["cards","forest"]),m(d,{class:"mt-4",cards:t.amphibians,forest:t.forest,symbol:"amphibian",heading:"amphibians"},null,8,["cards","forest"]),m(d,{class:"mt-4",cards:t.insectsBottom,forest:t.forest,symbol:"insect",heading:"insects"},null,8,["cards","forest"]),m(d,{class:"mt-4",cards:t.pawedBottom,forest:t.forest,symbol:"pawedAnimal",heading:"pawedAnimals"},null,8,["cards","forest"]),n("div",ot,c(e.$t("sides")),1),m(d,{class:"mt-2",cards:t.insectsSide,forest:t.forest,symbol:"insect",heading:"insects"},null,8,["cards","forest"]),m(d,{class:"mt-4",cards:t.bats,forest:t.forest,symbol:"bat",heading:"bats"},null,8,["cards","forest"]),m(d,{class:"mt-4",cards:t.deerAndCloven,forest:t.forest,symbol:"deer",symbol2:"clovenHoofedAnimal",heading:"deerAndCloven"},null,8,["cards","forest"]),m(d,{class:"mt-4",cards:t.pawedSide,forest:t.forest,symbol:"pawedAnimal",heading:"pawedAnimals"},null,8,["cards","forest"]),n("div",it,[n("div",dt,[n("img",{src:"./img/cave.png",alt:e.$t("cave"),onClick:s[0]||(s[0]=p=>t.setCaveCount(t.forest.caveCount+1))},null,8,ct)]),n("div",mt,[n("input",{value:t.forest.caveCount,onInput:s[1]||(s[1]=p=>t.setCaveCount(Number(p.target.value))),type:"number",class:"form-control text-center fs-5",min:"0",onfocus:"this.select();",onclick:"this.select();"},null,40,ut)])])])):b("",!0),n("div",yt,[n("div",ft,[n("div",gt,[n("div",bt,[n("div",ht,c(e.$t("ranking")),1),n("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:s[2]||(s[2]=p=>t.toggleRankingsModal(!0))})]),n("div",pt,[m(l,{onToggleStandings:t.toggleRankingsModal},null,8,["onToggleStandings"])]),n("div",_t,[n("div",null,[n("button",{class:"d-block btn btn-danger btn-sm",onClick:s[3]||(s[3]=(...p)=>t.startNewGame&&t.startNewGame(...p))},c(e.$t("startNewGame")),1),n("button",{class:"mt-1 btn btn-danger btn-sm",onClick:s[4]||(s[4]=(...p)=>t.resetPlayers&&t.resetPlayers(...p))},c(e.$t("resetPlayers")),1)]),n("div",vt,[n("button",{class:"btn btn-primary",onClick:s[5]||(s[5]=p=>t.toggleRankingsModal(!0))},"OK")])])])])])],64)}const Lt=C(tt,[["render",Ct],["__scopeId","data-v-f2af20b9"]]);export{Lt as default};
